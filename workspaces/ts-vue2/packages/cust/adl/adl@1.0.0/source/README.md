# 🗓 排班表格组件使用文档

一个支持复制粘贴、撤销恢复、自动补休和动态月份天数的高级排班表格组件。点击单元格进入编辑模式，支持键盘快捷操作。

---

## ✅ 基本功能

| 功能点          | 描述                                                                      |
| --------------- | ------------------------------------------------------------------------- |
| ⌨️ 单元格编辑   | 点击单元格后变为下拉框，可选择配置的班次类型                              |
| 📋 复制粘贴支持 | 支持鼠标框选，粘贴表格文本；支持复制 (`Cmd/Ctrl+C`) 与粘贴 (`Cmd/Ctrl+V`) |
| ↩️ 撤销/恢复    | `Cmd/Ctrl+Z` 撤销，`Cmd/Ctrl+Shift+Z` 恢复                                |
| 📆 动态天数生成 | 根据 `year + month` 自动生成当月天数                                      |
| 🔁 夜班自动补休 | 夜班后一个单元格自动补上「休息」文案，可配置                              |
| 🎨 支持高亮样式 | 指定班次文字高亮（如：夜班为红色）                                        |

---

## 🧾 Props 配置说明

| 参数名                     | 类型       | 默认值               | 描述                                                       |
| -------------------------- | ---------- | -------------------- | ---------------------------------------------------------- |
| `year`                     | Number     | 当前年份             | 年份，用于生成天数                                         |
| `month`                    | Number     | 当前月份（1-12）     | 月份，用于生成天数                                         |
| `names`                    | String[]   | `['张三','李四'...]` | 行数据，对应每一排的姓名                                   |
| `value`                    | String[][] | 自动生成空白排班表   | 表格数据，二维数组                                         |
| `options`                  | Object[]   | `[白班/夜班/休息]`   | 下拉选项数组，每项包含 `label` `value` `highlight`（可选） |
| `nightShiftValue`          | String     | `'夜班'`             | 夜班的值，用于识别是否自动补休                             |
| `restAfterNightShiftValue` | String     | `'休息'`             | 夜班后补的休息内容                                         |

### 🧩 options 示例

```js
[
  { label: '白班', value: '白班' },
  { label: '夜班', value: '夜班', highlight: 'red' },
  { label: '休息', value: '休息' },
];
```

- `label`：用户可见的文字
- `value`：存入 value 中的值
- `highlight`：可选，设置对应文字颜色，如 `'red'` `'blue'`

---

## 📤 双向绑定

通过 `v-model` 或 `:value + @input` 控制与外部同步，适用于数据驱动视图更新。

---

## 🎯 特殊行为说明

| 行为         | 触发时机                     | 说明                                              |
| ------------ | ---------------------------- | ------------------------------------------------- |
| 自动补休     | 选中「夜班」后自动补「休息」 | 补休写入紧接夜班右侧单元格，**无论原本是否为空**  |
| 复制粘贴范围 | 鼠标框选后 Ctrl+C / V        | 使用 Excel 风格粘贴方式，支持外部表格数据快速填充 |
| 撤销 / 恢复  | Ctrl+Z / Ctrl+Shift+Z        | 每次变更都会推入 undo 栈，支持回退操作            |

---

## 💡 使用示意（低代码 JSON）

```json
{
  "type": "排班表格",
  "props": {
    "year": 2025,
    "month": 5,
    "names": ["阿狸", "提莫", "盖伦"],
    "nightShiftValue": "夜班",
    "restAfterNightShiftValue": "休息",
    "options": [
      { "label": "白班", "value": "白班" },
      { "label": "夜班", "value": "夜班", "highlight": "red" },
      { "label": "休息", "value": "休息" }
    ],
    "value": [
      ["白班", "夜班", "休息", "", "", "", "", ""],
      ["", "", "", "", "", "", "", ""]
    ]
  }
}
```

---

## 🧷 注意事项

- 请确保 `value` 是一个 **二维数组**，且与 `names` 数量一致。
- 夜班自动补休功能不考虑已有值，始终强制覆盖右侧单元格。
- 当前仅支持文字型数据复制粘贴，暂不支持样式复制。

---

如果你有进一步扩展需求（如班次颜色更多样、自定义只读单元格、远程数据源等），欢迎联系组件维护者商健 👨‍💻。
